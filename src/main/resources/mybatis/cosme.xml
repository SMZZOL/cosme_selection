<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="dev.mvc.cosme.CosmeDAOInter">
  <!-- 화장품 등록 -->
  <insert id="make" parameterType="dev.mvc.cosme.CosmeDAOInter">
    INSERT INTO cosme(cosmeno, brand, cosmename, rdate, masterno, cosme_cateno, cosme_file, cosme_file_saved, cosme_file_preview, cosme_file_size, cosme_youtube)
    VALUES(cosme_seq.nextval, #{brand}, #{cosmename}, sysdate, #{masterno}, #{cosme_cateno}, #{cosme_file}, #{cosme_file_saved}, #{cosme_file_preview}, #{cosme_file_size}, #{cosme_youtube})
  </insert>

  <!-- 화장품 글 목록 -->
  <select id="cosme_all" resultType="dev.mvc.cosme.CosmeDAOInter">
    SELECT cosmeno, brand, cosmename, rdate, masterno, cosme_cateno, cosme_file, 
              cosme_file_saved, cosme_file_preview, cosme_file_size, cosme_youtube
    FROM cosme
    ORDER BY cosmeno DESC
  </select> 
  
  <select id= "cosme_cate_all" resultType="dev.mvc.cosme.cosmeDAOInter">
     SELECT cosmeno, brand, cosmename, rdate, masterno, cosme_cateno, cosme_file, 
               cosme_file_saved, cosme_file_preview, cosme_file_size, cosme_youtube
     FROM cosme
    WHERE cosme_cateno=#{cosme_cateno}  
  </select>
  
  <!-- 전체 수정 -->
  <update id="update_all_cosme" parameterType="dev.mvc.cosme.CosmeDAOInter">
    UPDATE cosme
    SET brand=#{brand}, cosmename=#{cosmename}, rdate=sysdate, masterno=#{masterno}, cosme_cateno=#{cosme_cateno}, 
          cosme_file=#{cosme_file}, cosme_file_saved=#{cosme_file_saved}, cosme_file_preview=#{cosme_file_preview}, cosme_file_size=#{cosme_file_size}, cosme_youtube=#{cosme_youtube}
    WHERE cosmeno = #{cosmeno}
  </update>
  
  <!-- 화장품 삭제 -->
  <delete id="cosme_delete" parameterType="int">
    DELETE FROM cosme
    WHERE cosmeno=#{cosmeno}
  </delete>
 
  <!-- 특정 카테고리에 속한 레코드 갯수를 리턴 -->
  <select id="count_by_cateno" resultType="int" parameterType="int">
    SELECT COUNT(*) as cnt 
    FROM cosme 
    WHERE cosme_cateno=#{cosme_cateno}
  </select>
  
  <!-- 특정 카테고리에 속한 모든 레코드 삭제 -->
  <delete id="delete_by_cateno" parameterType="int">
    DELETE FROM contents
    WHERE cateno=#{cateno}
  </delete>
             
</mapper> 




